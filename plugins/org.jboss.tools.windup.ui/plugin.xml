<?xml version="1.0" encoding="UTF-8"?>
<plugin>

   <extension
         point="org.eclipse.ui.views">
      <category
            name="%category.windup.name"
            id="org.jboss.tools.windup.ui.view.category.windup">
      </category>
      <view
            category="org.jboss.tools.windup.ui.view.category.windup"
            class="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorer"
            icon="icons/windup.png"
            id="org.jboss.tools.windup.ui.explorer"
            name="Issue Explorer">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.exportWizards">
      <category
            name="%category.windup.name"
            id="org.jboss.tools.windup.ui.export.category.windup">
      </category>
      <wizard
            name="%export.windup_reports.name"
            icon="icons/export_windup_report.png"
            category="org.jboss.tools.windup.ui.export.category.windup"
            class="org.jboss.tools.windup.ui.internal.wizards.WindupReportExportWizard"
            id="org.jboss.tools.windup.ui.exportWizard.WindupReport">
         <description>
         </description>
         <keywordReference
               id="org.jboss.tools.windup.ui.keywords.WindupReport">
         </keywordReference>
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.keywords">
      <keyword
            label="%keywords.windup_report.labels"
            id="org.jboss.tools.windup.ui.keywords.WindupReport">
      </keyword>
   </extension>
   <extension
         id="org.jboss.tools.windup.ui.fragment"
         point="org.eclipse.e4.workbench.model">
      <fragment
            uri="windup-ui.e4xmi">
      </fragment>
      <processor
            apply="initial"
            beforefragment="false"
            class="org.jboss.tools.windup.ui.WindupPerspective">
      </processor>
   </extension>
   <extension
         id="windup.expressions"
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="org.jboss.tools.windup.ui.expression.generateReport">
         <and>
            <iterate
                  ifEmpty="false"
                  operator="and">
               <or>
                  <instanceof
                        value="org.eclipse.core.resources.IResource">
                  </instanceof>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                  </adapt>
               </or>
            </iterate>
         </and>
      </definition>
      <definition
            id="org.jboss.tools.windup.ui.expression.showReport">
              <and>
                 <count
                       value="1">
                 </count>
                 <iterate
                       ifEmpty="false"
                       operator="or">
                    <or>
                       <instanceof
                             value="org.eclipse.core.resources.IFile">
                       </instanceof>
                       <instanceof
                             value="org.eclipse.jdt.core.ICompilationUnit">
                       </instanceof>
                       <adapt
                             type="org.eclipse.core.resources.IFile">
                       </adapt>
                       <adapt
                             type="org.eclipse.jdt.core.ICompilationUnit">
                       </adapt>
                    </or>
                 </iterate>
              </and> 
      </definition>
      <definition
            id="org.jboss.tools.windup.ui.expression.exportReport">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <or>
                       <instanceof
                             value="org.eclipse.core.resources.IResource">
                       </instanceof>
                       <adapt
                             type="org.eclipse.core.resources.IResource">
                       </adapt>
                    </or>
                 </iterate>
              </and>
      </definition>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            class="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.launch.WindupLaunchGroup"
            id="org.jboss.tools.windup.ui.WindupLaunchConfigurationTabGroup"
            type="org.jboss.tools.windup.ui.WindupLaunchConfigurationType">
         <launchMode
               description="%windupLaunch.run"
               mode="run"
               perspective="org.jboss.tools.windup.ui.perspective">
         </launchMode>
      </launchConfigurationTabGroup>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTypeImages">
      <launchConfigurationTypeImage
            configTypeID="org.jboss.tools.windup.ui.WindupLaunchConfigurationType"
            icon="icons/windup.png"
            id="org.jboss.tools.windup.ui.WindupLaunchConfigurationType">
      </launchConfigurationTypeImage>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.jboss.tools.windup.ui.explorer?after=additions">
         <command
               commandId="org.jboss.tools.windup.ui.expandIssuesCommand"
               icon="icons/expandall.png"
               style="push">
         </command>
         <separator
               name="org.jboss.tools.windup.ui.separatorExplorer1"
               visible="true">
         </separator>
         <command
               commandId="org.jboss.tools.windup.ui.deleteAllIssues"
               icon="icons/deleteAllMarkers.png"
               style="push"
               tooltip="Delete All Migration Issues">
         </command>
         <command
               commandId="org.jboss.tools.windup.ui.createRunConfiguration"
               icon="icons/windup.png"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:org.jboss.tools.windup.ui.explorer?after=additions">
         <command
               commandId="org.jboss.tools.windup.ui.groupByProjectHierarchy"
               icon="icons/hierarchicalLayout.png"
               label="Show Project Hierarchy"
               style="toggle">
         </command>
         <menu
               label="Group By">
            <command
                  commandId="org.jboss.tools.windup.ui.groupBySeverity"
                  icon="icons/errorwarning.png"
                  label="Severity"
                  style="toggle">
            </command>
            <command
                  commandId="org.jboss.tools.windup.ui.groupByRule"
                  icon="icons/rule.gif"
                  label="Migration Rule"
                  style="toggle">
            </command>
            <command
                  commandId="org.jboss.tools.windup.ui.groupByFile"
                  icon="icons/file.png"
                  label="File"
                  style="toggle">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.jboss.tools.windup.ui.explorer?after=additions">
         <command
               commandId="org.jboss.tools.windup.ui.issueDetails"
               label="Issue Details"
               style="push">
            <visibleWhen>
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.jboss.tools.windup.ui.internal.explorer.MarkerNode">
                     </instanceof>
                  </iterate>
               </and>
            </visibleWhen>
         </command>
         <separator
               name="org.jboss.tools.windup.ui.separator1"
               visible="true">
         </separator>
         <command
               commandId="org.jboss.tools.windup.ui.markIssueFixed"
               icon="icons/fixedIssue.png"
               label="Mark as Fixed"
               style="push"
               tooltip="Mark issue as fixed.">
            <visibleWhen>
               <and>
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.jboss.tools.windup.ui.internal.explorer.MarkerNode">
                     </instanceof>
                     <test
                           property="org.jboss.tools.windup.ui.isFixed">
                     </test>
                  </iterate>
               </and>
            </visibleWhen>
         </command>
         <separator
               name="org.jboss.tools.windup.ui.separator2"
               visible="true">
         </separator>
         <command
               commandId="org.jboss.tools.windup.ui.previewQuickFix"
               label="Preview Quick Fix"
               style="push">
            <visibleWhen>
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.jboss.tools.windup.ui.internal.explorer.MarkerNode">
                     </instanceof>
                     <test
                           property="org.jboss.tools.windup.ui.hasQuickFix">
                     </test>
                     <test
                           property="org.jboss.tools.windup.ui.isFixed"
                           value="false">
                     </test></iterate>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.jboss.tools.windup.ui.quickFixIssue"
               label="Apply Quick Fix"
               style="push">
            <visibleWhen>
               <and>
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.jboss.tools.windup.ui.internal.explorer.MarkerNode">
                     </instanceof>
                     <test
                           property="org.jboss.tools.windup.ui.hasQuickFix">
                     </test>
                     <test
                           property="org.jboss.tools.windup.ui.isFixed"
                           value="false">
                     </test>
                  </iterate></and>
            </visibleWhen>
         </command>
         <separator
               name="org.jboss.tools.windup.ui.separator3"
               visible="true">
         </separator>
         <command
               commandId="org.jboss.tools.windup.ui.deleteIssue"
               icon="icons/delete_config.png"
               label="Delete"
               style="push">
            <visibleWhen>
               <and>
                  <iterate
                        operator="or">
                     <instanceof
                           value="org.jboss.tools.windup.ui.internal.explorer.MarkerNode">
                     </instanceof>
                  </iterate>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="org.jboss.tools.windup.ui.internal.editor.OpenWindupEditorHandler"
            id="org.jboss.tools.windup.ui.command.showWindup"
            name="Open Windup">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.internal.editor.CreateRunConfigurationHandler"
            id="org.jboss.tools.windup.ui.createRunConfiguration"
            name="Create Windup Run Configuration">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$GroupByProjectHierarchy"
            id="org.jboss.tools.windup.ui.groupByProjectHierarchy"
            name="Group By Project Hierarchy">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:true"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$GroupByFile"
            id="org.jboss.tools.windup.ui.groupByFile"
            name="Group By File">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:false"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$GroupBySeverity"
            id="org.jboss.tools.windup.ui.groupBySeverity"
            name="Group By Severity">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:false"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$GroupByRule"
            id="org.jboss.tools.windup.ui.groupByRule"
            name="Group By Rule">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:false"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$ExpandIssuesHandler"
            id="org.jboss.tools.windup.ui.expandIssuesCommand"
            name="Expand Issues">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$IssueQuickFixHandler"
            id="org.jboss.tools.windup.ui.quickFixIssue"
            name="Quick Fix Issue">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$MarkIssueFixedHandler"
            id="org.jboss.tools.windup.ui.markIssueFixed"
            name="Mark Issue Fixed">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$PreviewQuickFixHandler"
            id="org.jboss.tools.windup.ui.previewQuickFix"
            name="Preview Quick Fix">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$DeleteIssueHandler"
            id="org.jboss.tools.windup.ui.deleteIssue"
            name="Delete Issue">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$ViewIssueDetailsHandler"
            id="org.jboss.tools.windup.ui.issueDetails"
            name="Issue Details">
      </command>
      <command
            defaultHandler="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerHandlers$DeleteAllIssuesHandler"
            id="org.jboss.tools.windup.ui.deleteAllIssues"
            name="Delete All Issues">
      </command>
   </extension>
    <extension
             point="org.eclipse.debug.core.launchConfigurationTypes">
          <launchConfigurationType
                sourceLocatorId="org.eclipse.jdt.launching.sourceLocator.JavaSourceLookupDirector"
                name="%windupLaunch.configType.name"
                sourcePathComputerId="org.eclipse.jdt.launching.sourceLookup.javaSourcePathComputer"
                delegate="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.launch.WindupLaunchDelegate"
                modes="run"
                id="org.jboss.tools.windup.ui.WindupLaunchConfigurationType">
          </launchConfigurationType>
     </extension>
    <extension
          point="org.eclipse.ui.navigator.navigatorContent">
       <navigatorContent
             activeByDefault="true"
             contentProvider="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerContentProvider"
             icon="icons/windup.png"
             id="org.jboss.tools.windup.ui.explorer.WindupExplorerContentProvider"
             labelProvider="org.jboss.tools.windup.ui.WindupExtensionFactory:org.jboss.tools.windup.ui.internal.explorer.IssueExplorerLabelProvider"
             name="Windup Explorer Content Provider"
             priority="highest">
          <triggerPoints>
             <adapt
                   type="org.eclipse.core.resources.IResource">
             </adapt>
             <adapt
                   type="org.jboss.tools.windup.ui.internal.explorer.WindupGroup">
             </adapt>
             <adapt
                   type="org.jboss.tools.windup.windup.Issue">
             </adapt>
          </triggerPoints>
          <possibleChildren>
                <or>
                    <instanceof value="org.eclipse.core.resources.IResource" />
                    <instanceof value="org.eclipse.jdt.core.IJavaElement" />
                    <instanceof value="org.eclipse.jdt.core.IJarEntryResource" />
                    <instanceof value="org.eclipse.jdt.internal.ui.packageview.PackageFragmentRootContainer" />
                </or>
            </possibleChildren> 
          <actionProvider
                class="org.jboss.tools.windup.ui.internal.explorer.WindupActionProvider"
                id="org.jboss.tools.windup.ui.internal.explorer.actionProvider"
                overrides="org.eclipse.jdt.ui.navigator.actions.ViewActions"
                priority="highest">
                <enablement>
                    <or>  
                        <instanceof value="org.eclipse.core.resources.IWorkspaceRoot" /> 
                        <adapt type="java.util.Collection"> 
                            <count value="0" />
                        </adapt>        
                    </or>
                </enablement>
          </actionProvider>
       </navigatorContent>
    </extension>
    <extension
          point="org.eclipse.ui.navigator.viewer">
       <viewer
             viewerId="org.jboss.tools.windup.ui.explorer">
          <options>
             <property
                   name="org.eclipse.ui.navigator.hideLinkWithEditorAction"
                   value="true">
             </property>
             <property
                   name="org.eclipse.ui.navigator.hideAvailableCustomizationsDialog"
                   value="true">
             </property>
          </options>
       </viewer>
       <viewerContentBinding
             viewerId="org.jboss.tools.windup.ui.explorer">
          <includes>
             <contentExtension
                   isRoot="false"
                   pattern="org.eclipse.jdt.java.ui.javaContent"/>   
             <contentExtension
                   isRoot="true"
                   pattern="org.jboss.tools.windup.ui.*">
             </contentExtension></includes>
       </viewerContentBinding>
       <viewerActionBinding
             viewerId="org.jboss.tools.windup.ui.explorer">
          <includes>
             <actionExtension
                   pattern="org.jboss.tools.windup.ui.*">
             </actionExtension></includes>
       </viewerActionBinding>
    </extension>
    <extension
          point="org.eclipse.ui.perspectiveExtensions">
       <perspectiveExtension
             targetID="*">
          <viewShortcut
                id="org.jboss.tools.windup.ui.explorer">
          </viewShortcut>
          <viewShortcut
                id="org.jboss.tools.windup.ui.issue.details">
          </viewShortcut>
       </perspectiveExtension>
    </extension>
    <extension
          point="org.eclipse.core.expressions.propertyTesters">
       <propertyTester
             class="org.jboss.tools.windup.ui.internal.explorer.IssueExplorerPropertyTesters$QuickFixPropertyTester"
             id="org.jboss.tools.windup.ui.hasQuickFixTester"
             namespace="org.jboss.tools.windup.ui"
             properties="hasQuickFix, isFixed"
             type="org.jboss.tools.windup.ui.internal.explorer.MarkerNode">
       </propertyTester>
    </extension>
    <extension
          point="org.eclipse.ui.ide.markerImageProviders">
       <imageprovider
             icon="icons/windup.png"
             id="org.jboss.tools.windup.ui.imageprovider"
             markertype="org.jboss.tools.windup.core.hintMarker">
       </imageprovider>
    </extension>
</plugin>
